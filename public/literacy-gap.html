<!DOCTYPE html>
<html>
<head> 
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script> 
<script type="text/javascript">
function renderChart(chartData) {
    var chart = new CanvasJS.Chart('chartContainer', { 
        title: {
            text: 'Literacy Gap Between Female and Male Populations'
        },
        data: [
            {
                type: "column",
                dataPoints: chartData
            }
        ]
    });
    chart.render();	    
}

$.get('/api/agg/literacy')
    .then(results =>{
        renderChart(results.map(item => {
            return {
                y: item.literacyGap,
                label: item.name + "  (avg: "  + item.literacy.total + "%)"
            }
        }));
    });
</script>
</head>  
<body>  
<div id="chartContainer" style="width:100%; height:100%"></div>  
</body>
</html>